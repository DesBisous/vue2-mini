{"version":3,"file":"index.umd.js","sources":["../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/typeof.js","../src/code/utils/env.js","../src/code/utils/index.js","../src/code/observer/dep.js","../src/code/vdom/vnode.js","../src/code/observer/array.js","../src/code/observer/index.js","../src/code/instance/state.js","../src/compiler/astParser.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../src/compiler/generate.js","../src/compiler/index.js","../src/code/observer/scheduler.js","../src/code/observer/Watcher.js","../src/shared/util.js","../src/code/vdom/patchTypes.js","../src/code/vdom/diff.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../src/code/vdom/rnode.js","../src/code/vdom/doPatch.js","../src/code/vdom/patch.js","../src/code/instance/lifecycle.js","../src/code/init.js","../src/code/vdom/index.js","../src/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// can we use __proto__?\nexport const hasProto = '__proto__' in {}\n\n// Browser environment sniffing\nexport const inBrowser = typeof window !== 'undefined'\nexport const UA = inBrowser && window.navigator.userAgent.toLowerCase()\nexport const isIE = UA && /msie|trident/.test(UA)\nexport const isIE9 = UA && UA.indexOf('msie 9.0') > 0\nexport const isEdge = UA && UA.indexOf('edge/') > 0\nexport const isAndroid = UA && UA.indexOf('android') > 0\nexport const isIOS = UA && /iphone|ipad|ipod|ios/.test(UA)\nexport const isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge\n\nexport const nextTick = function (watcher) {\n  const nextTickHandler = watcher.run.bind(watcher);\n  let timerFunc;\n  // 这里兼容集中异步 Api 处理\n  if (typeof setImmediate !== 'undefined') {\n    timerFunc = () => {\n      setImmediate(nextTickHandler);\n    };\n  } else if (typeof MessageChannel !== 'undefined') {\n    const channel = new MessageChannel();\n    const port = channel.port2;\n    channel.port1.onmessage = nextTickHandler;\n    timerFunc = () => {\n      port.postMessage(1)\n    }\n  } else\n    if (typeof Promise !== 'undefined') {\n      const p = Promise.resolve();\n      timerFunc = () => {\n        p.then(nextTickHandler);\n      }\n    } else {\n      timerFunc = () => {\n        setTimeout(nextTickHandler, 0);\n      }\n    }\n  // 开启异步更新\n  timerFunc();\n}","function proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      if (newValue === vm[target][key]) return;\n      vm[target][key] = newValue;\n    }\n  })\n}\n\nfunction isObject(value) {\n  return typeof value === 'object' && value !== null;\n}\n\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n\nfunction def(data, key, value, enumerable) {\n  Object.defineProperty(data, key, {\n    configurable: true,\n    enumerable: !!enumerable,\n    writable: true,\n    value\n  })\n}\n\nfunction remove(arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\nconst bailRE = /[^\\w.$]/\nfunction parsePath(path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  const segments = path.split('.')\n  return function (obj) {\n    for (let i = 0; i < segments.length; i++) {\n      if (!obj) return\n      obj = obj[segments[i]]\n    }\n    return obj\n  }\n}\n\nexport * from './env';\n\nexport {\n  proxy,\n  isObject,\n  isArray,\n  def,\n  remove,\n  parsePath\n};","import { remove } from '../utils';\n\nlet uid = 0;\n\nexport default class Dep {\n  constructor() {\n    this.id = uid++;\n    this.subs = [];\n  }\n\n  addSub(sub) {\n    this.subs.push(sub);\n  }\n\n  removeSub(sub) {\n    remove(this.subs, sub);\n  }\n\n  depend() {\n    // 给当前 Watcher push 依赖，为了后续和 dep 的 subs 进行比较，移除掉无用的依赖，\n    // 意思就是没用到的属性，在属性变更后就不要通知相对应的 Watcher 了\n    if (Dep.target) {\n      Dep.target.addDep(this); // Watcher 对象中的 addDep，里面会调用 dep.addSub()\n    }\n  }\n\n  notify() {\n    // stabilize the subscriber list first\n    const subs = this.subs.slice(); // 浅拷贝\n    for (let i = 0, l = subs.length; i < l; i++) {\n      subs[i].update(); // 触发依赖更新函数\n    }\n  }\n}\n\nDep.target = null;\nconst targetStack = [];\n\nexport function pushTarget(_target) {\n  if (Dep.target) targetStack.push(Dep.target);\n  Dep.target = _target;\n}\n\nexport function popTarget() {\n  Dep.target = targetStack.pop();\n}","class VNode {\n  constructor(tag, props, children, text) {\n    this.tag = tag;\n    this.props = props;\n    this.children = children;\n    this.text = text;\n  }\n}\n\nfunction createElementVNode(tag, attrs = {}, ...children) {\n  return new VNode(tag, attrs, children);\n}\n\nfunction createTextVNode(text) {\n  return new VNode(undefined, undefined, undefined, text);\n}\n\nexport {\n  VNode,\n  createElementVNode,\n  createTextVNode\n}","import { def } from \"../utils\";\n\nconst originArrMethods = Array.prototype,\n  arrayMethods = Object.create(originArrMethods); // 创建一个对象， 并继承 Array.prototype\n\nconst ARR_METHODS = [\n  'push',\n  'pop',\n  'shift',\n  'unshify',\n  'reverse',\n  'sort',\n  'splice',\n];\n\nARR_METHODS.forEach(function (method) {\n  def(arrayMethods, method, function (...args) {\n    const result = originArrMethods[method].apply(this, args),\n      ob = this.__ob__;\n\n\n    let newArr;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        newArr = args;\n        break;\n      case 'splice':\n        newArr = args[2];\n        break;\n      default: break;\n    }\n\n    // 对数组新加入的元素进行数据劫持\n    if (newArr) ob.observeArray(newArr);\n    // notify change\n    ob.dep.notify();\n    // 返回原函数执行结果\n    return result;\n  })\n})\n\nexport {\n  arrayMethods\n}","import Dep from './dep';\nimport { VNode } from '../vdom/vnode';\nimport { arrayMethods } from './array';\nimport { isArray, isObject, def, hasProto } from \"../utils\";\n\nconst arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\nclass Observer {\n  constructor(data) {\n    this.dep = new Dep();\n    def(data, '__ob__', this);\n\n    if (isArray(data)) {\n      const augment = hasProto\n        ? protoAugment\n        : copyAugment\n      augment(data, arrayMethods, arrayKeys)\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n\n  walk(data) {\n    const keys = Object.keys(data);\n    keys.forEach(function (key) {\n      defineReactive(data, key, data[key]);\n    });\n  }\n\n  observeArray(data) {\n    data.forEach(function (item) {\n      observe(item);\n    });\n  }\n}\n\nfunction protoAugment(target, src, keys) {\n  target.__proto__ = src\n}\n\nfunction copyAugment(target, src, keys) {\n  for (let i = 0, l = keys.length; i < l; i++) {\n    const key = keys[i]\n    def(target, key, src[key])\n  }\n}\n\nfunction defineReactive(data, key, val) {\n  const dep = new Dep(); // 闭包一个依赖对象\n\n  // 查找属性的描述器\n  const property = Object.getOwnPropertyDescriptor(data, key)\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // 判断是否属性本身设置过存储器描述\n  const getter = property && property.get\n  const setter = property && property.set\n\n  let childOb = observe(val); // 对值内部的属性进行数据劫持，这里源码中会做一个 shallow 判断，是否一开始深层进行依赖\n\n  Object.defineProperty(data, key, {\n    enumerable: true,\n    configurable: true,\n    get() {\n      const value = getter ? getter.call(data) : val;\n      if (Dep.target) {\n        dep.depend(); // 收集依赖,包括 Watcher 收集 dep 和 dep 收集 Watcher\n        if (childOb) {\n          /**\n           * 子数据响应对象本身的 this.dep 也进行依赖收集\n           * 这里其实对于数组方法重写的劫持触发更新，就是调用这里的 this.dep\n           * {a: [1, 2]}\n           * a 会闭包一个 dep 依赖，然后 value：[1, 2] 会构建出 ob 然后对 ob.dep 也会收集当前的依赖\n           */\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            // 如果是数组，对里面每一个响应对象本身的 this.dep 也进行依赖收集\n            dependArray(value);\n          }\n        }\n      }\n      // console.log('响应式获取：' + value);\n      return value;\n    },\n    set(newVal) {\n      const value = getter ? getter.call(newVal) : val;\n      // 这里的 newVal !== newVal && value !== value 为了避免 newVal 和 value 是一个 NaN，很严谨\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      // console.log('响应式设置：' + key + ' = ' + newVal);\n      if (setter) {\n        setter.call(data, newVal)\n      } else {\n        val = newVal\n      }\n      observe(newVal); // 对值内部的属性进行数据劫持，这里源码中会做一个 shallow 判断，是否一开始深层进行依赖\n      dep.notify(); // 触发依赖更新函数\n    }\n  })\n}\n\nfunction dependArray(value) {\n  for (let e, i = 0, l = value.length; i < l; i++) {\n    e = value[i]\n    e && e.__ob__ && e.__ob__.dep.depend()\n    if (Array.isArray(e)) {\n      dependArray(e)\n    }\n  }\n}\n\nfunction observe(data) {\n  if (!isObject(data) || data instanceof VNode) {\n    return;\n  }\n  let ob;\n  if (data.__ob__) {\n    ob = data.__ob__;\n  } else {\n    ob = new Observer(data);\n  }\n  return ob;\n}\n\nexport {\n  observe\n}","import { observe } from \"../observer\";\nimport { proxy } from '../utils';\n\nfunction initState(vm) {\n  vm._watchers = [];\n  const options = vm.$options;\n\n  if (options.props) {\n    initProps(vm);\n  }\n\n  if (options.methods) {\n    initMethods(vm);\n  }\n\n  if (options.data) {\n    initData(vm);\n  }\n\n  if (options.computed) {\n    initComputed(vm);\n  }\n\n  if (options.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initProps(vm) {\n\n}\n\nfunction initMethods(vm) { }\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data;\n\n  for (let key in data) {\n    proxy(vm, '_data', key); // 代理数据\n  }\n\n  observe(data); // 创建响应式\n}\n\nfunction initComputed(vm) { }\n\nfunction initWatch(vm) {\n\n}\n\nexport {\n  initState\n}","// id=\"app\" id='app' id=app\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n//标签名  <my-header></my-header>\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\n// <my:header></my:header>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// <div\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// > />\nconst startTagClose = /^\\s*(\\/?)>/;\n// </div>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\n\n// 以上正则是从官方 Vue 源码扣的\n\nfunction parseHtmlToAst(html) {\n  let text,\n    root,\n    currentParent,\n    stack = [];\n\n  while (html) {\n    // 查找 < 它包括例如： <div> </div>\n    let textEnd = html.indexOf('<');\n\n    if (textEnd === 0) {\n      // 获取到标签组装好的结构对象\n      const startTagMatch = parseStartTag();\n\n      // 对改标签进行子父层级处理\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n\n      // 获取标签结束 </div> 进行配置\n      const endTagMatch = html.match(endTag);\n\n      if (endTagMatch) {\n        // 删除结束标签的字符\n        advance(endTagMatch[0].length);\n        // 遇到结束标签，进行父子管理处理\n        end();\n        continue;\n      }\n    }\n\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n    }\n\n    if (text) {\n      advance(text.length);\n      chars(text);\n    }\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n\n    let end, attr;\n\n    if (start) {\n      // 保存标签名\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      // 删除匹配项\n      advance(start[0].length);\n\n      // 开始匹配标签属性\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(dynamicArgAttribute) || html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n        advance(attr[0].length);\n      }\n\n      if (end) {\n        // 删除匹配项\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n\n  // 对 html 删除匹配项长度父子\n  function advance(len) {\n    html = html.substring(len);\n  }\n\n  // 对开始标签进行父子关系处理\n  function start(tagName, attrs) {\n    const element = createASTElement(tagName, attrs);\n\n    if (!root) {\n      root = element;\n    }\n\n    stack.push(element);\n    currentParent = element;\n  }\n\n  // 对结束标签进行父子关系处理\n  function end() {\n    // 出栈，出栈的就是当前匹配到的结束标签\n    const element = stack.pop();\n\n    // 判断是否有父级\n    if (stack.length > 0) {\n      // 取出父级\n      currentParent = stack[stack.length - 1];\n      // 处理父子关系\n      element.parent = currentParent;\n      currentParent.children.push(element);\n    }\n  }\n\n  function chars(text) {\n    text = text.trim();\n\n    if (text.length > 0) {\n      currentParent.children.push({\n        type: 3,\n        text,\n      });\n    }\n  }\n\n  // 组装 AST 标签对象结构\n  function createASTElement(tagName, attrs) {\n    return {\n      tag: tagName,\n      type: 1,\n      children: [],\n      attrs,\n      parent: Window,\n    };\n  }\n\n  return root;\n}\n\nexport { parseHtmlToAst };\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// 判断是否为 {{  }} 这种文本\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nconst dynamicAttrRE = /^:.+$/;\n\n// 源码的方法名为：genProps，位置：vue/src/compiler/codegen/index.js\nfunction formatProps(attrs) {\n  let attrStr = '';\n  let dynamicAttrStr = '';\n  let dynamic = false;\n\n  attrs.forEach(item => {\n    dynamic = dynamicAttrRE.test(item.name);\n    if (item.name === 'style') {\n      let styleAttrs = {};\n      item.value.split(';').forEach(subItem => {\n        const [key, value] = subItem.split(':');\n        styleAttrs[key] = value;\n      });\n      item.value = styleAttrs;\n    }\n    if (dynamic) {\n      dynamicAttrStr += `\"${item.name.slice(1)}\", ${item.value},`;\n    } else {\n      attrStr += `${item.name}: ${JSON.stringify(item.value)},`;\n    }\n  });\n\n  attrStr = `{${attrStr.slice(0, -1)}}`;\n\n  if (dynamicAttrStr) {\n    return `_d(${attrStr}, [${dynamicAttrStr.slice(0, -1)}])`;\n  } else {\n    return attrStr;\n  }\n}\n\nfunction generateChild(node) {\n  if (node.type === 1) {\n    return generate(node);\n  } else if (node.type === 3) {\n    let text = node.text;\n\n    if (!defaultTagRE.test(text)) {\n      // 这里需要 JSON.stringify 在包一下，否者会出现 _v(hello) 解析的时候 hello 不就成了变量了\n      return `_v(${JSON.stringify(text)})`;\n    }\n\n    let match,\n      index, // 保存正则成功解析项的开始索引\n      // defaultTagRE.lastIndex 会在正则解析的时候，一直处于匹配项末端的索引，下一轮匹配就从 defaultTagRE.lastIndex 开始\n      lastIndex = (defaultTagRE.lastIndex = 0),\n      textArr = [];\n\n    while ((match = defaultTagRE.exec(text))) {\n      index = match.index; // 保存正则成功解析项的开始索引\n      if (index > lastIndex) {\n        textArr.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      // 这里不需要 JSON.stringify 原因是，match[1] 指的就是 data 的属性\n      textArr.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n\n    // 正则匹配不到了，但是还剩下静态文本\n    if (lastIndex < text.length) {\n      textArr.push(JSON.stringify(text.slice(lastIndex)));\n    }\n\n    // _v('我的姓名是：'+{{name}}+'，请多多关照~')\n    return `_v(${textArr.join('+')})`;\n  }\n}\n\nfunction getChildren(el) {\n  const children = el.children;\n\n  if (children) {\n    return children.map(c => generateChild(c)).join(',');\n  }\n}\n\nfunction generate(el) {\n  const children = getChildren(el);\n\n  const code = `_c(${JSON.stringify(el.tag)}, ${\n    el.attrs.length > 0 ? formatProps(el.attrs) : 'undefined'\n  }${children ? `, ${children}` : ''})`;\n\n  return code;\n}\n\nexport { generate };\n","\nimport { parseHtmlToAst } from './astParser';\nimport { generate } from './generate';\n\nfunction compileToRenderFunction(html) {\n  const ast = parseHtmlToAst(html),\n    code = generate(ast),\n    render = new Function(`\n    with(this){ return ${code}; }\n  `);\n  console.log('AST:', ast);\n  console.log('render:', code);\n  return render;\n}\n\nexport {\n  compileToRenderFunction\n}","import { nextTick } from '../utils';\n\nfunction queueWatcher(watcher) {\n  nextTick(watcher);\n}\n\nexport { queueWatcher };\n","import { parsePath } from '../utils';\nimport { pushTarget, popTarget } from './dep';\nimport { queueWatcher } from './scheduler';\n\nlet uid = 0;\n\nexport default class Watcher {\n  constructor(vm, expOrFn, options) {\n    this.vm = vm;\n    vm._watchers.push(this);\n\n    // options 源码中还有更多，比如：deep\n    if (options) {\n      this.lazy = !!options.lazy;\n    } else {\n      this.lazy = false;\n    }\n\n    this.id = ++uid;\n    this.deps = []; // 存储和当前 watcher 相关的响应式属性的 dep\n    this.newDeps = []; // 新的 deps\n    this.depIds = new Set();\n    this.newDepIds = new Set();\n\n    if (typeof expOrFn === 'function') {\n      this.getter = expOrFn;\n    } else {\n      // parsePath 解析属性(a.b.c)对应在 vm 的 value，源码存在但本处不涉及到\n      this.getter = parsePath(expOrFn);\n      if (!this.getter) {\n        this.getter = function () { }\n        process.env.NODE_ENV !== 'production' && console.warn(\n          `Failed watching path: \"${expOrFn}\" ` +\n          'Watcher only accepts simple dot-delimited paths. ' +\n          'For full control, use a function instead.'\n        )\n      }\n    }\n\n    // 初次执行\n    this.value = this.lazy\n      ? undefined\n      : this.get();\n  }\n\n  get() {\n    // 这就是让 Dep.target 保存当前的 Watcher\n    pushTarget(this);\n    try {\n      this.getter(); // 执行更新函数\n    } catch (e) {\n      throw e;\n    } finally {\n      popTarget(); // 弹出 Dep.Target\n      this.cleanupDeps(); // 做 Watcher 的 dep 清除\n    }\n  }\n\n  addDep(dep) {\n    const id = dep.id;\n    // 当前 Watcher 的新 depIds 不存在，这加入传进来的 dep\n    if (!this.newDepIds.has(id)) {\n      this.newDepIds.add(id);\n      this.newDeps.push(dep); // Watcher 关联的 dep 保存\n      // Watcher 关联的 dep 没有保存过，让 dep 收集当前的 Watcher 依赖\n      // Watcher 已保存过了 dep 那就说明，当前 dep 也已经收集了当前 Watcher 了，所有就不需要让 dep 收集依赖了\n      if (!this.depIds.has(id)) {\n        dep.addSub(this);\n      }\n    }\n  }\n\n  /**\n   * Clean up for dependency collection.\n   */\n  cleanupDeps() {\n    // 源码有更多\n    this.depIds = this.newDepIds;\n    this.newDepIds.clear(); // 清除最新记录 depIds 集合\n    this.deps = this.newDeps;\n    this.newDeps.length = 0; // 清除最新记录 dep 集合\n  }\n\n  update() {\n    // 这里的话，源码中会有更多的判断\n    // 一般来说更新的话，会进行异步更新，会涉及到 nextTick 函数\n    // 最终会执行 run() 函数\n    queueWatcher(this);\n  }\n\n  run() {\n    this.get();\n  }\n}","export function isUndef(v) {\n  return v === undefined || v === null\n}\n\nexport function isDef(v) {\n  return v !== undefined && v !== null\n}","export const ATTR = 'ATTR';\nexport const TEXT = 'TEXT';\nexport const REPLACE = 'REPLACE';\nexport const REMOVE = '';","import { ATTR, TEXT, REMOVE, REPLACE } from './patchTypes';\n\n// 存储 diff 产生的补丁\nlet patches = {};\nlet vnIndex = 0;\n\nfunction diff(oldVnode, vnode) {\n  patches = {};\n  vnIndex = 0;\n  const index = 0; // 初始从零开始\n  vNodeWalk(oldVnode, vnode, index);\n  return patches;\n}\n\nfunction vNodeWalk(oldVnode, vnode, index) {\n  const vnPatch = [];\n\n  if (!vnode) {\n    // 新 vnode 被删除了\n    vnPatch.push({\n      type: REMOVE,\n      index,\n    });\n  } else if (oldVnode.text && vnode.text) {\n    if (oldVnode.text !== vnode.text) {\n      vnPatch.push({\n        type: TEXT,\n        text: vnode.text,\n      });\n    }\n  } else if (oldVnode.tag === vnode.tag) {\n    const attrsPatch = attrsWalk(oldVnode.props, vnode.props);\n    if (Object.keys(attrsPatch).length) {\n      vnPatch.push({\n        type: ATTR,\n        attrs: attrsPatch,\n      });\n    }\n    childrenWalk(oldVnode.children, vnode.children);\n  } else {\n    vnPatch.push({\n      type: REPLACE,\n      vnode,\n    });\n  }\n\n  if (vnPatch.length) {\n    patches[index] = vnPatch;\n  }\n}\n\nfunction attrsWalk(oldProps, newProps) {\n  const attrsPatch = {};\n\n  for (const key in oldProps) {\n    if (JSON.stringify(oldProps[key]) !== JSON.stringify(newProps[key])) {\n      // 旧有，新没，会压入 undefined\n      // 旧有，新有，替换\n      attrsPatch[key] = newProps[key];\n    }\n  }\n\n  for (const key in newProps) {\n    if (!Object.hasOwnProperty.call(oldProps, key)) {\n      // 旧没，新有，新增\n      attrsPatch[key] = newProps[key];\n    }\n  }\n  return attrsPatch;\n}\n\nfunction childrenWalk(oldChildren, newChildren) {\n  oldChildren.map((child, idx) => {\n    vNodeWalk(child, newChildren[idx], ++vnIndex);\n  });\n}\n\nexport { diff };\n","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import { isDef } from '../../shared/util.js';\n\nfunction createElement(vnode) {\n  const { tag, props, children, text } = vnode;\n  if (typeof tag === 'string') {\n    vnode.el = document.createElement(tag);\n    updateProps(vnode);\n    children.forEach(function (child) {\n      vnode.el.appendChild(createElement(child));\n    });\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\nfunction updateProps(vnode) {\n  const el = vnode.el,\n    newProps = vnode.props || {};\n\n  handleProps(el, newProps);\n}\n\nfunction handleProps(rnode, props) {\n  for (let key in props) {\n    if (Object.hasOwnProperty.call(props, key)) {\n      if (!props[key]) {\n        rnode.removeAttribute(key);\n      } else if (key === 'style') {\n        for (let sKey in props[key]) {\n          if (Object.hasOwnProperty.call(props[key], sKey)) {\n            rnode.style[sKey] = props[key][sKey];\n          }\n        }\n      } else if (key === 'class') {\n        rnode.className = props[key];\n      } else if (key === 'value') {\n        if (rnode.tagName === 'INPUT' || rnode.tagName === 'TEXTAREA') {\n          rnode.value = props[key];\n        } else {\n          rnode.setAttribute(key, props[key]);\n        }\n      } else {\n        rnode.setAttribute(key, props[key]);\n      }\n    }\n  }\n}\n\nfunction removeElement(oldVnode) {\n  // 判断 oldVnode 是否是真实节点\n  const isRealElement = isDef(oldVnode.nodeType);\n  let el = isRealElement ? oldVnode : oldVnode.el;\n  const childNodes = el.childNodes;\n  for (const childNode of childNodes) {\n    removeNode(el, childNode);\n  }\n}\n\nfunction removeNode(parent, childNode) {\n  parent.removeChild(childNode);\n}\n\nexport { createElement, handleProps, removeElement };\n","import { ATTR, TEXT, REMOVE, REPLACE } from './patchTypes';\nimport { createElement, handleProps } from './rnode';\n\nlet index = 0;\nlet finalPatches = {};\n\nfunction doPatch(el, patches) {\n  index = 0;\n  finalPatches = patches;\n  console.log(finalPatches)\n  rnodeWalk(el);\n}\n\nfunction rnodeWalk(rnode) {\n  const patch = finalPatches[index++],\n    childNodes = rnode.childNodes;\n\n  [...childNodes].map(c => rnodeWalk(c));\n\n  if (patch) {\n    patchAction(rnode, patch);\n  }\n}\n\nfunction patchAction(rnode, patch) {\n  for (const p of patch) {\n    switch (p.type) {\n      case ATTR:\n        handleProps(rnode, p.attrs)\n        break;\n      case TEXT:\n        rnode.textContent = p.text;\n        break;\n      case REMOVE:\n        rnode.parentNode.removeChild(rnode);\n        break;\n      case REPLACE:\n        rnode.parentNode.replaceChild(\n          createElement(p.vnode),\n          rnode\n        );\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport {\n  doPatch\n}","\nimport { isUndef, isDef } from '../../shared/util.js';\nimport { diff } from './diff.js';\nimport { doPatch } from './doPatch.js';\nimport { createElement, removeElement } from './rnode.js';\n\nfunction patch(oldVnode, vnode) {\n  // 判断新的 vnode 不存在\n  if (isUndef(vnode)) {\n    // 判断旧节点存在\n    if (isDef(oldVnode)) {\n      // Vue 源码这里会执行销毁的生命周期函数，直接删除旧节点内容\n      removeElement(oldVnode);\n    }\n    return;\n  }\n\n  // 判断 oldVnode 是否是真实节点\n  const isRealElement = isDef(oldVnode.nodeType),\n    el = isRealElement ? oldVnode : oldVnode.el;\n\n  if (isRealElement) {\n    // 首次挂载\n    const nEl = createElement(vnode),\n      parentElement = el.parentElement;\n\n    // el.nextSibling 指的是 el 的兄弟节点\n    parentElement.insertBefore(nEl, el.nextSibling);\n    parentElement.removeChild(el);\n    return nEl;\n  } else {\n    // oldVnode 与 vnode diff 比较打补丁\n    const patches = diff(oldVnode, vnode);\n    if (Object.keys(patches).length) {\n      // 开始打补丁\n      doPatch(el, patches);\n    }\n    vnode.el = el;\n    return el;\n  }\n}\n\nexport {\n  patch\n};","import Watcher from '../observer/Watcher';\nimport { patch } from '../vdom/patch';\n\nfunction mountComponent(vm, el) {\n  vm.$el = el;\n  // 做一些环境判断\n  if (!vm.$options.render) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (\n        (vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el ||\n        el\n      ) {\n        console.warn(\n          'You are using the runtime-only build of Vue where the template ' +\n            'compiler is not available. Either pre-compile the templates into ' +\n            'render functions, or use the compiler-included build.'\n        );\n      } else {\n        console.warn(\n          'Failed to mount component: template or render function not defined.'\n        );\n      }\n    }\n  }\n\n  // 这个方法在源码中声明时会根据 process.env.NODE_ENV !== 'production' 做一些额外处理\n  const updateComponent = () => {\n    vm._update(vm._render());\n  };\n\n  // 创建一个 render Watcher，这里会执行 updateComponent 对响应式数据做依赖搜集\n  vm._watcher = new Watcher(vm, updateComponent);\n}\n\nfunction lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this,\n      prevVnode = vm._vnode;\n\n    // 保存当前 vnode\n    vm._vnode = vnode;\n\n    if (!prevVnode) {\n      vm.$el = patch(vm.$el, vnode);\n    } else {\n      vm.$el = patch(prevVnode, vnode);\n    }\n  };\n}\n\nexport { lifecycleMixin, mountComponent };\n","import { initState } from './instance/state';\nimport { compileToRenderFunction } from '../compiler';\nimport { mountComponent } from './instance/lifecycle';\n\nfunction initMixin(Vue) {\n  // 世界的开始\n  Vue.prototype._init = function (options) {\n    const vm = this;\n\n    vm.$options = options;\n\n    // 响应式劫持\n    initState(vm);\n\n    if (vm.$options.el) {\n      // 挂载函数 Vue.prototype.$mount\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this,\n      options = vm.$options;\n\n    el = document.querySelector(el);\n\n    if (!options.render) {\n      let template = options.template;\n\n      if (!template) {\n        template = el.outerHTML;\n      }\n\n      // 构建 AST -> Render\n      const render = compileToRenderFunction(template);\n      options.render = render;\n    }\n    // console.log(options.render);\n    mountComponent(vm, el);\n  };\n}\n\nexport { initMixin };\n","import { createElementVNode, createTextVNode } from './vnode';\n\nfunction renderMixin(Vue) {\n\n  Vue.prototype._c = function () {\n    return createElementVNode(...arguments);\n  }\n\n  Vue.prototype._v = function () {\n    return createTextVNode(...arguments);\n  }\n\n  Vue.prototype._s = function (value) {\n    if (!value) return;\n    // 这里为什么直接获取 value 就行，\n    // 因为这个 value 就是执行 render 的时候在通过 with 作用下直接获取到了 vm 代理后拿到 _data 的属性\n    return typeof value === 'object' ? JSON.stringify(value) : value;\n  }\n\n  Vue.prototype._d = function (baseObj, values) {\n    for (let i = 0; i < values.length; i += 2) {\n      const key = values[i];\n      if (typeof key === 'string' && key) {\n        baseObj[values[i]] = values[i + 1];\n      }\n    }\n    return baseObj;\n  }\n\n  Vue.prototype._render = function () {\n    const vm = this,\n      render = vm.$options.render,\n      vnode = render.call(vm); // 执行这个 render 的时候，会调用 _c、_v、_s 函数\n    return vnode;\n  }\n}\n\nexport {\n  renderMixin\n};","import { initMixin } from './code/init';\nimport { lifecycleMixin } from './code/instance/lifecycle';\nimport { renderMixin } from './code/vdom';\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\nexport default Vue;\n"],"names":["hasProto","inBrowser","window","UA","navigator","userAgent","toLowerCase","test","indexOf","isEdge","nextTick","watcher","nextTickHandler","run","bind","timerFunc","setImmediate","MessageChannel","channel","port","port2","port1","onmessage","postMessage","Promise","p","resolve","then","setTimeout","proxy","vm","target","key","Object","defineProperty","get","set","newValue","isObject","value","isArray","Array","def","data","enumerable","configurable","writable","remove","arr","item","length","index","splice","bailRE","parsePath","path","segments","split","obj","i","uid","Dep","id","subs","sub","push","addDep","slice","l","update","targetStack","pushTarget","_target","popTarget","pop","VNode","tag","props","children","text","createElementVNode","attrs","createTextVNode","undefined","originArrMethods","prototype","arrayMethods","create","ARR_METHODS","forEach","method","args","result","apply","ob","__ob__","newArr","observeArray","dep","notify","arrayKeys","getOwnPropertyNames","Observer","augment","protoAugment","copyAugment","walk","keys","defineReactive","observe","src","__proto__","val","property","getOwnPropertyDescriptor","getter","setter","childOb","call","depend","dependArray","newVal","e","initState","_watchers","options","$options","methods","initData","computed","watch","_data","attribute","dynamicArgAttribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtmlToAst","html","root","currentParent","stack","textEnd","startTagMatch","parseStartTag","start","tagName","endTagMatch","match","advance","end","substring","chars","attr","name","len","element","createASTElement","parent","trim","type","Window","defaultTagRE","dynamicAttrRE","formatProps","attrStr","dynamicAttrStr","dynamic","styleAttrs","subItem","JSON","stringify","generateChild","node","generate","lastIndex","textArr","exec","join","getChildren","el","map","c","code","compileToRenderFunction","ast","render","Function","console","log","queueWatcher","Watcher","expOrFn","lazy","deps","newDeps","depIds","Set","newDepIds","process","env","NODE_ENV","warn","cleanupDeps","has","add","addSub","clear","isUndef","v","isDef","ATTR","TEXT","REPLACE","REMOVE","patches","vnIndex","diff","oldVnode","vnode","vNodeWalk","vnPatch","attrsPatch","attrsWalk","childrenWalk","oldProps","newProps","hasOwnProperty","oldChildren","newChildren","child","idx","createElement","document","updateProps","appendChild","createTextNode","handleProps","rnode","removeAttribute","sKey","style","className","setAttribute","removeElement","isRealElement","nodeType","childNodes","childNode","removeNode","removeChild","finalPatches","doPatch","rnodeWalk","patch","patchAction","textContent","parentNode","replaceChild","nEl","parentElement","insertBefore","nextSibling","mountComponent","$el","template","charAt","updateComponent","_update","_render","_watcher","lifecycleMixin","Vue","prevVnode","_vnode","initMixin","_init","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_v","_s","_d","baseObj","values"],"mappings":"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"}